# 东池便当官网开发流程规范

## 📋 文档说明

本规范基于 2025-10-23 的开发实践总结，旨在确保后续开发的高效性、规范性和质量。

---

## 🎯 项目核心目标

1. **竞赛目标**：冲刺东池便当官网竞赛一等奖（5000元）
2. **质量标准**：对标蜜雪冰城等大品牌官网水准
3. **设计定位**：现代化、高端感、专业度、炫技特效
4. **论文方向**：AIGC辅助视觉传达设计的应用研究

---

## 🔄 标准开发流程

### 阶段一：需求分析与规划（10-15分钟）

#### 1. 明确开发目标
- [ ] 确认页面/功能的核心目的
- [ ] 列出必须实现的功能点
- [ ] 确定"炫技"亮点（动画、特效、交互）
- [ ] 评估技术难度和时间

#### 2. 参考调研
- [ ] 查看东池便当官网：https://www.dongchibd.com/
- [ ] 参考竞品设计（蜜雪冰城等）
- [ ] 收集设计灵感和技术方案

#### 3. 创建任务清单
```markdown
使用 TodoWrite 工具创建详细任务列表：
- [ ] 主要任务1
- [ ] 主要任务2
- [ ] 主要任务3
- [ ] 测试验证
- [ ] 截图记录
- [ ] 文档更新
```

---

### 阶段二：设计与开发（主要阶段）

#### 1. 开发前检查清单
- [ ] **确认开发服务器运行中**（`npm run dev`）
- [ ] **确认Chrome DevTools已连接**
- [ ] 确认工作目录正确
- [ ] 确认没有未解决的报错

#### 2. 组件开发规范

**2.1 文件结构**
```vue
<template>
  <!-- 清晰的HTML结构，使用语义化标签 -->
</template>

<script setup>
// 1. 导入依赖（Vue、第三方库、组件）
import { ref, onMounted } from 'vue'
import AOS from 'aos'

// 2. 响应式数据
const data = ref()

// 3. 方法定义
const handleClick = () => {}

// 4. 生命周期
onMounted(() => {
  // 初始化动画库
  AOS.init()
})
</script>

<style scoped>
/* 组件专属样式 */
</style>
```

**2.2 命名规范**
- 组件文件：PascalCase（如 `HeroSection.vue`）
- 组件名称：与文件名一致
- 变量/方法：camelCase（如 `isModalOpen`）
- CSS类名：kebab-case 或 TailwindCSS工具类

**2.3 代码质量要求**
- ✅ 使用 TailwindCSS 优先，减少自定义CSS
- ✅ 响应式设计：移动端优先（mobile-first）
- ✅ 性能优化：懒加载、防抖、节流
- ✅ 动画流畅：优先使用 CSS transitions，复杂动画用 GSAP
- ✅ 可访问性：语义化标签、alt属性、aria-label

#### 3. 特效集成规范

**必须集成的4大炫技特效**（适用于重点页面）：
1. **ScrollProgress** - 渐变滚动进度条
2. **BackToTop** - SVG环形进度返回顶部
3. **MouseFollower** - 鼠标跟随光晕特效
4. **ParticleBackground** - Canvas粒子背景

**集成步骤**：
```vue
<script setup>
import ScrollProgress from '@/components/shared/ScrollProgress.vue'
import BackToTop from '@/components/shared/BackToTop.vue'
import MouseFollower from '@/components/shared/MouseFollower.vue'
import ParticleBackground from '@/components/shared/ParticleBackground.vue'
</script>

<template>
  <div class="page-name">
    <!-- 特效组件 -->
    <ParticleBackground :particle-count="60" />
    <MouseFollower />
    <ScrollProgress />
    <BackToTop />

    <!-- 页面内容 -->
  </div>
</template>
```

#### 4. 样式开发规范

**间距系统**：
- 页面section统一使用：`py-20`（80px）
- 特殊强调区域使用：`py-24`（96px）
- ❌ 避免混用过多不同间距值

**容器规范**：
- 使用 `.container` 类（已配置响应式断点）
- 配合 `mx-auto` 实现居中
- 添加 `px-6` 或 `px-4` 提供左右内边距

**颜色系统**（东池便当品牌色）：
- 主色：绿色 `#8BC34A` / `green-500`
- 辅助色：橙色 `#FF9800` / `orange-500`
- 强调色：黄色 `#FFC107` / `yellow-500`

**背景装饰透明度**：
- 产品区域：`opacity-50`
- 品牌区域：`opacity-40`
- 其他区域：`opacity-35`

---

### 阶段三：实时测试与验证（开发中持续进行）

#### 1. 浏览器实时验证（Chrome DevTools）

**必须使用工具**：
```javascript
// 获取页面信息
mcp__chrome-devtools__take_snapshot()      // 获取页面结构
mcp__chrome-devtools__take_screenshot()    // 全屏截图
mcp__chrome-devtools__list_console_messages() // 检查控制台报错
```

**验证检查清单**：
- [ ] 页面是否完整显示（无大片空白）
- [ ] 所有section是否正确加载
- [ ] 控制台无报错（红色error）
- [ ] 动画是否流畅运行
- [ ] 交互功能是否正常（点击、悬停、滚动）

#### 2. 响应式测试

**必测断点**：
```javascript
// 使用 resize_page 工具测试
- 移动端：375px × 667px（iPhone SE）
- 平板：768px × 1024px（iPad）
- 笔记本：1366px × 768px
- 桌面：1920px × 1080px
- 大屏：2560px × 1440px
```

#### 3. 性能检查

- [ ] 页面加载速度 < 3秒
- [ ] 动画帧率保持60fps
- [ ] 无内存泄漏（监听器正确清理）
- [ ] 图片懒加载生效

---

### 阶段四：问题修复流程

#### 1. 发现问题

**问题来源**：
1. Chrome DevTools控制台报错
2. 页面显示异常（空白、错位）
3. 功能不工作
4. Vite开发服务器报错

#### 2. 问题诊断

**系统化排查**：
```markdown
1. 检查开发服务器输出
   - 使用 BashOutput 查看stderr
   - 查找 "Internal server error"
   - 查找 "Failed to resolve import"

2. 检查浏览器控制台
   - 使用 list_console_messages
   - 重点关注 [error] 类型

3. 检查文件依赖
   - 确认所有import路径正确
   - 确认图片资源存在
   - 确认组件文件存在

4. 检查代码语法
   - Vue模板语法是否正确
   - JavaScript语法错误
   - CSS选择器冲突
```

#### 3. 常见问题与解决方案

**问题1：页面空白或只显示部分内容**
```
原因：组件导入错误、图片路径错误、CSS覆盖问题
解决：
1. 检查所有import语句
2. 检查资源文件路径（使用相对路径或@别名）
3. 检查全局CSS是否覆盖了Tailwind类
```

**问题2：路由跳转不工作**
```
原因：使用了<a href="#">而非<router-link>
解决：
1. 将所有<a>标签改为<router-link>
2. href="#xxx" 改为 :to="/xxx"
3. 导入 useRouter
```

**问题3：样式不生效**
```
原因：全局CSS reset覆盖、Tailwind配置问题
解决：
1. 检查 src/style.css 的 * 选择器
2. 避免在全局reset中使用margin/padding
3. 只在 * 中保留 box-sizing
```

**问题4：动画不流畅**
```
原因：过度使用min-h-screen、动画性能问题
解决：
1. 移除不必要的min-h-screen
2. 使用transform代替position变化
3. 使用will-change优化动画性能
```

---

### 阶段五：截图记录与文档更新

#### 1. 截图规范

**必须记录的截图**：
```
开发完成后立即截图：
1. 完整页面截图（fullPage: true）
2. 关键交互状态（悬停、点击后）
3. 响应式布局对比（桌面vs移动）
4. 修复前后对比（如有重大bug修复）
```

**截图保存路径**：
```
dongchi-website/docs/screenshots/
├── homepage-hero-v1.png
├── franchise-calculator.png
├── products-modal.png
└── before-after-fix-xxx.png
```

#### 2. 开发日志更新

**必须更新的文档**：
1. **C:\Users\zhouk\Desktop\lunwen\开发日志.md** ⚠️（注意路径）
2. CLAUDE.md（项目根目录对话记忆库）

**日志格式**：
```markdown
### 2025-10-XX - [功能名称]

#### ✅ 完成的功能
- 功能点1
- 功能点2

#### 🎨 技术亮点
- 亮点1
- 亮点2

#### 📊 开发数据
- 代码量：XXX行
- 新增组件：X个
- 耗时：X小时

#### ⚠️ 遇到的问题与解决
- 问题：...
- 解决：...

#### 📸 截图
![描述](路径)
```

---

### 阶段六：版本控制与提交

#### 1. Git提交规范

**提交前检查清单**：
- [ ] 所有功能已测试通过
- [ ] 控制台无报错
- [ ] 代码已格式化
- [ ] 已删除console.log调试代码
- [ ] 已更新开发日志

**Commit Message规范**：
```bash
# 格式：<type>: <简短描述>
#
# 详细描述（可选）
#
# 🤖 Generated with Claude Code
# Co-Authored-By: Claude <noreply@anthropic.com>

# Type类型：
feat:     新功能
fix:      修复bug
style:    样式优化
refactor: 代码重构
perf:     性能优化
docs:     文档更新
chore:    构建/工具变动
```

**提交步骤**：
```bash
# 1. 查看状态
git status
git diff

# 2. 添加文件
git add .

# 3. 创建提交（使用HEREDOC格式化）
git commit -m "$(cat <<'EOF'
feat: 添加XXX功能

主要更新：
- 功能点1
- 功能点2
- 功能点3

技术实现：
- 使用XX技术
- 集成XX特效

🤖 Generated with Claude Code

Co-Authored-By: Claude <noreply@anthropic.com>
EOF
)"

# 4. 推送到远程
git push
```

#### 2. 版本标签（重要版本）

```bash
# 创建标签
git tag -a v2025.10.XX -m "版本描述"

# 推送标签
git push origin v2025.10.XX
```

---

## 🎨 设计与开发原则

### 1. 视觉效果优先原则

> **"一切效果表现为优先级"** - 用户核心要求

- ✅ 宁可多加特效，不要平淡无奇
- ✅ 动画流畅度 > 代码简洁性
- ✅ 视觉冲击力 > 功能简单性
- ✅ 敢于尝试炫技效果（Canvas、GSAP、3D变换）

### 2. 功能完整性原则

- ✅ 对标大品牌标准（蜜雪冰城、星巴克）
- ✅ 每个页面都要有深度内容
- ✅ 交互细节要打磨（悬停、点击、加载）
- ✅ 表单要有完整验证

### 3. 响应式优先原则

- ✅ Mobile-First设计
- ✅ 所有组件必须适配移动端
- ✅ 断点：sm(640px) md(768px) lg(1024px) xl(1280px) 2xl(1536px)
- ✅ 测试真实设备尺寸

### 4. 性能优先原则

- ✅ 图片懒加载
- ✅ 组件按需导入
- ✅ 动画使用transform而非position
- ✅ 监听器及时清理（onUnmounted）

---

## 🛠️ 技术栈与工具

### 核心技术
- **框架**：Vue 3 (Composition API)
- **构建**：Vite 7.x
- **样式**：TailwindCSS 4.x
- **路由**：Vue Router 4.x
- **状态**：Pinia

### 动画与特效库
- **GSAP** - 高级动画（Timeline、ScrollTrigger）
- **AOS** - 滚动触发动画
- **Swiper** - 轮播图
- **CountUp.js** - 数字滚动（待集成）

### 开发工具
- **Chrome DevTools MCP** - 浏览器自动化测试
- **Claude Code** - AI辅助开发
- **Git** - 版本控制

---

## 📁 项目目录结构

```
dongchi-website/
├── src/
│   ├── views/              # 页面组件
│   │   ├── HomePage.vue
│   │   ├── AboutPage.vue
│   │   ├── ProductsPage.vue
│   │   ├── FranchisePage.vue
│   │   └── ...
│   ├── components/
│   │   ├── home/           # 首页专属组件
│   │   ├── layout/         # 布局组件（导航、页脚）
│   │   ├── shared/         # 共享特效组件
│   │   │   ├── ScrollProgress.vue
│   │   │   ├── BackToTop.vue
│   │   │   ├── MouseFollower.vue
│   │   │   └── ParticleBackground.vue
│   │   └── ...
│   ├── router/             # 路由配置
│   ├── assets/             # 静态资源
│   │   ├── images/
│   │   └── videos/
│   ├── utils/              # 工具函数
│   ├── App.vue
│   ├── main.js
│   └── style.css           # 全局样式
├── docs/
│   └── screenshots/        # 开发截图
├── public/                 # 公共资源
├── CLAUDE.md              # 对话记忆库
├── 开发流程规范.md         # 本文档
└── package.json
```

---

## 🚨 常见陷阱与注意事项

### ❌ 禁止事项

1. **禁止在全局CSS中使用padding/margin重置**
   ```css
   /* ❌ 错误 */
   * {
     margin: 0;
     padding: 0;
   }

   /* ✅ 正确 */
   * {
     box-sizing: border-box;
   }
   ```

2. **禁止混用锚点和路由**
   ```vue
   <!-- ❌ 错误 -->
   <a href="#about">关于</a>

   <!-- ✅ 正确 -->
   <router-link to="/about">关于</router-link>
   ```

3. **禁止过度使用min-h-screen**
   - 仅Hero区域使用全屏高度
   - 其他section根据内容自适应

4. **禁止导入不存在的组件/资源**
   - 开发前确认文件存在
   - 使用 `@/` 别名确保路径正确

### ⚠️ 注意事项

1. **开发日志路径必须正确**
   - 路径：`C:\Users\zhouk\Desktop\lunwen\开发日志.md`
   - 不是项目内的路径

2. **Chrome DevTools必须保持连接**
   - 实时验证页面效果
   - 及时发现报错

3. **特效组件按需使用**
   - 重点页面：首页、加盟页、产品页（全部特效）
   - 简单页面：联系页、新闻页（部分特效）

4. **响应式测试不能偷懒**
   - 每个新功能都要测试移动端
   - 特别注意表单、弹窗的移动端体验

---

## 📊 质量检查清单

### 功能完成度检查
- [ ] 所有计划功能已实现
- [ ] 交互逻辑正确无误
- [ ] 表单验证完整
- [ ] 数据展示准确

### 视觉效果检查
- [ ] 动画流畅（60fps）
- [ ] 特效正常运行
- [ ] 配色符合品牌规范
- [ ] 间距统一合理

### 响应式检查
- [ ] 移动端（375px）显示正常
- [ ] 平板（768px）显示正常
- [ ] 桌面（1920px）显示正常
- [ ] 大屏（2560px）显示正常

### 代码质量检查
- [ ] 无控制台报错
- [ ] 无Vite编译警告
- [ ] 代码符合规范
- [ ] 无冗余代码

### 文档完整性检查
- [ ] 开发日志已更新
- [ ] Git提交信息规范
- [ ] 截图已保存
- [ ] CLAUDE.md已更新

---

## 🎯 后续开发计划

### 待开发页面（优先级排序）

1. **品质保障页** - 展示食材溯源、制作流程
2. **门店查询页** - 地图集成、门店筛选
3. **新闻资讯页** - 动态列表、分类筛选
4. **联系我们页** - 表单、地图、社交媒体

### 待优化功能

1. 首页Hero区域 - 添加视频背景或全屏动画
2. 产品页 - 完善产品详情Modal
3. 加盟页 - 投资计算器逻辑优化
4. 全局 - 添加骨架屏加载
5. 全局 - 图片懒加载优化

---

## 📝 开发规范版本记录

- **v1.0** - 2025-10-23 创建
  - 基于首次完整开发周期总结
  - 包含问题诊断、修复流程、质量标准

---

**最后更新：** 2025-10-23 23:00
**文档作者：** Claude Code
**审核状态：** 待用户检查确认
